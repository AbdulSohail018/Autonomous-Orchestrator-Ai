name: customers_data_quality_checkpoint
config_version: 1.0
template_name: 
module_name: great_expectations.checkpoint
class_name: Checkpoint

run_name_template: "%Y%m%d-%H%M%S-customers-dq-check"

validations:
  - batch_request:
      datasource_name: filesystem_datasource
      data_connector_name: default_inferred_data_connector_name
      data_asset_name: customers
      batch_spec_passthrough:
        reader_method: read_parquet
        reader_options: {}
    expectation_suite_name: customers_expectation_suite

# Actions to take when running checkpoint
action_list:
  - name: store_validation_result
    action:
      class_name: StoreValidationResultAction
  - name: store_evaluation_params
    action:
      class_name: StoreEvaluationParametersAction
  - name: update_data_docs
    action:
      class_name: UpdateDataDocsAction
      site_names: []

# Evaluation parameters for dynamic expectations
evaluation_parameters:
  current_date: 
    default_identifier: current_date
    value: "{{ datetime.now().strftime('%Y-%m-%d') }}"
  
  max_event_delay_hours:
    default_identifier: max_event_delay_hours
    value: 24
    
  min_signup_date:
    default_identifier: min_signup_date
    value: "2020-01-01"

# Runtime configuration
runtime_configuration:
  result_format:
    result_format: COMPLETE
    include_config: true
    return_unexpected_index_list: true
    return_unexpected_index_query: true
    partial_unexpected_count: 50

# Failure handling
catch_exceptions: true
result_format: SUMMARY

# Data context configuration for file outputs
data_context_root_dir: /data/ops/ge_context
stores:
  validations_store:
    class_name: ValidationsStore
    store_backend:
      class_name: TupleFilesystemStoreBackend
      base_directory: /data/ops/validations/
  
  evaluation_parameter_store:
    class_name: EvaluationParameterStore
    store_backend:
      class_name: InMemoryStoreBackend
  
  checkpoint_store:
    class_name: CheckpointStore
    store_backend:
      class_name: TupleFilesystemStoreBackend
      base_directory: /data/ops/checkpoints/

expectations_store_name: expectations_store
validations_store_name: validations_store
evaluation_parameter_store_name: evaluation_parameter_store
checkpoint_store_name: checkpoint_store

data_docs_sites:
  local_site:
    class_name: SiteBuilder
    show_how_to_buttons: false
    store_backend:
      class_name: TupleFilesystemStoreBackend
      base_directory: /data/ops/data_docs/
      platform_specific_separator: false
    site_index_builder:
      class_name: DefaultSiteIndexBuilder

anonymous_usage_statistics:
  enabled: false
  data_context_id: null